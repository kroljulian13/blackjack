{% extends "layout.html" %}

{% block content %}

<main role="main" class="col-sm-9 sm-auto offset-sm-1  col-md-10 pt-3">
    <h1>Dashboard</h1>

    <div class="flex-wrapper">

      <div class="single-chart">
        <svg viewbox="0 0 36 36" class="circular-chart orange">
          <path class="circle-bg"
            d="M18 2.0845
              a 15.9155 15.9155 0 0 1 0 31.831
              a 15.9155 15.9155 0 0 1 0 -31.831"
          />
          <path class="circle"
            stroke-dasharray="100, 100"
            d="M18 2.0845
              a 15.9155 15.9155 0 0 1 0 31.831
              a 15.9155 15.9155 0 0 1 0 -31.831"
          />
          <text x="18" y="20.35" class="percentage">{{metric.best}}</text>
        </svg>
        <h5>Best Balance</h5>
      </div>

      <div class="single-chart">
        <svg viewbox="0 0 36 36" class="circular-chart green">
          <path class="circle-bg"
            d="M18 2.0845
              a 15.9155 15.9155 0 0 1 0 31.831
              a 15.9155 15.9155 0 0 1 0 -31.831"
          />
          <path class="circle"
            stroke-dasharray="{{(metric.worst/metric.best)*100}}, 100"
            d="M18 2.0845
              a 15.9155 15.9155 0 0 1 0 31.831
              a 15.9155 15.9155 0 0 1 0 -31.831"
          />
          <text x="18" y="20.35" class="percentage">{{metric.worst}}</text>
        </svg>
        <h5>Worst Balance</h5>
      </div>

      <div class="single-chart">
        <svg viewbox="0 0 36 36" class="circular-chart blue">
          <path class="circle-bg"
            d="M18 2.0845
              a 15.9155 15.9155 0 0 1 0 31.831
              a 15.9155 15.9155 0 0 1 0 -31.831"
          />
          <path class="circle"
            stroke-dasharray="100, 100"
            d="M18 2.0845
              a 15.9155 15.9155 0 0 1 0 31.831
              a 15.9155 15.9155 0 0 1 0 -31.831"
          />
          <text x="18" y="20.35" class="percentage">bet</text>
        </svg>
        <h5>Best Strategy</h5>
      </div>

    </div>
  
    <br> <br> <br>

    <h2>Last results</h2>
    <div class="table-responsive">
      <table class="table table-striped">
        <thead>
          <tr>
            <th>Date</th>
            <th>Strategy</th>
            <th>Balance</th>
            <th>Total Wins</th>
            <th>No of games</th>            
            <th>User</th>
          </tr>
        </thead>
        <tbody>
          {% for item in results %}
          <tr>
            <td>{{ item.timestamp.strftime('%Y-%m-%d %H:%M:%S') }} </td>
            <td>{{ item.strategy }}  </td>
            <td>{{ item.balance }}  </td>
            <td>{{ item.total_win }}  </td>
            <td>{{ item.numberOfPlays }}  </td>            
            <td>{{ item.userNick }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
</main>

{% endblock %}